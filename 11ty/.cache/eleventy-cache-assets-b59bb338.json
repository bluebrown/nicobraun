{"items":[{"tags":["python","docker","flask","flask-socketio","eventlet"],"owner":{"reputation":2590,"user_id":9208887,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64b42a62830357a073f912ce786822e1?s=128&d=identicon&r=PG&f=1","display_name":"The Fool","link":"https://stackoverflow.com/users/9208887/the-fool"},"is_answered":true,"view_count":4256,"accepted_answer_id":51932912,"answer_count":2,"score":3,"last_activity_date":1616865454,"creation_date":1534700632,"last_edit_date":1534704973,"question_id":51920267,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51920267/how-to-setup-flask-socketio-in-a-docker-container","title":"How to setup flask-socketio in a docker container?","body":"<p>Hello I'm trying to setup flask-socketio in a docker container. \nIt seems to run but I get an error( from the browser) when I try to access localhost on port 5000 like I'm used to do with flask apps. It say's: unable to connect!</p>\n\n<p>I will show you the 5 important files: Dockerfile, requirements.txt, docker-compose.yml, web_app.py and index.html</p>\n\n<p>Dockerfile:</p>\n\n<pre><code>FROM python:3.6.5\n\nWORKDIR /code\nCOPY * /code/\nRUN pip install -r requirements.txt\n</code></pre>\n\n<p>requirements.txt:</p>\n\n<pre><code>Flask==1.0.2\nFlask-SocketIO==3.0.1\neventlet==0.24.1\n</code></pre>\n\n<p>docker-compose.yml:</p>\n\n<pre><code>version: \"3\"\nservices:\n  web:\n    build: ./web\n    ports:\n      - '5000:5000'\n    volumes:\n      - './web:/code'\n</code></pre>\n\n<p>I use the commands  <code>docker-compose up --build</code> and <code>docker-compose run web /bin/bash</code> to enter this container in interactive mode.</p>\n\n<p>web_app.py:</p>\n\n<pre><code>from flask import Flask, render_template\nfrom flask_socketio import SocketIO, emit\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\nsocketio = SocketIO(app)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@socketio.on('my event')\ndef log_message(message):\n    emit('my response', {'data': 'got it!'})\n\nif __name__ == '__main__':\n    socketio.run(app)\n</code></pre>\n\n<p>index.html:</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;script type=\"text/javascript\" src=\"//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js\"&gt;&lt;/script&gt;\n  &lt;title&gt;SocketIO&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n  &lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n    //Establish connection and emit a message to confirm.\n\n    var socket = io.connect('http://' + document.domain + ':' + location.port);\n    socket.on('connect', function() {\n        socket.emit('my event', {data: 'I\\'m connected!'});\n    });\n\n  &lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Once inside the container I simple run: <code>python web_app.py</code> but nothing happens. No error and no working page.</p>\n\n<p>I feel like I'm missing so steps to initialize everything correctly but I cant find out what it is. The web is full of very different examples and I'm confused. What makes it even harder is that I'm using eventlet here but not every example goes this route. Some use gevent or other things. </p>\n\n<p>I would be really glad if someone gave me a little hint.\nCheers </p>\n"},{"tags":["javascript","dhtml"],"owner":{"reputation":1243,"user_id":103192,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/a0a0bf451db6d1e06be88b4ce3cd72a1?s=128&d=identicon&r=PG","display_name":"Rawler","link":"https://stackoverflow.com/users/103192/rawler"},"is_answered":true,"view_count":30382,"accepted_answer_id":4991152,"answer_count":6,"score":41,"last_activity_date":1613329505,"creation_date":1297679497,"last_edit_date":1600627904,"question_id":4991098,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/4991098/replacing-all-children-of-an-htmlelement","title":"Replacing all children of an HTMLElement?","body":"<p>In my code, I fairly frequently need to replace all children of a certain HTML container with a new list of children.</p>\n\n<p>What is the fastest way to do this? My current approach is collecting all new elements into a DocumentFragment. The only way I've found to then actually replace the children is to remove all the children one by one, and append the fragment. Is there no faster way?</p>\n\n<p>Note: the solution needs not be cross-browser, but should preferably not require 3d-party components such as jQuery. The target-device is WebKit on a <em>very</em> slow CPU so I need to keep full control of any reflows.</p>\n"},{"tags":["nginx"],"owner":{"reputation":360,"user_id":4198765,"user_type":"registered","accept_rate":100,"profile_image":"https://lh6.googleusercontent.com/-lLiNgSOZF3M/AAAAAAAAAAI/AAAAAAAAALU/xxzqAFpg-9s/photo.jpg?sz=128","display_name":"SBO","link":"https://stackoverflow.com/users/4198765/sbo"},"is_answered":true,"view_count":11456,"answer_count":4,"score":1,"last_activity_date":1600538155,"creation_date":1533031562,"question_id":51610819,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51610819/nginx-error-the-access-control-allow-origin-header-contains-multiple-values","title":"nginx error : The &#39;Access-Control-Allow-Origin&#39; header contains multiple values","body":"<p>I used to run nginx v1.6 with this configuration : </p>\n\n<pre><code>location / {\n    alias                   /some/path/;\n    proxy_set_header        X-Real-IP $remote_addr;\n    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header        X-Forwarded-Proto $scheme;\n    proxy_set_header        uuid $uuid;\n    more_set_headers        'Access-Control-Allow-Origin: $http_origin';\n    more_set_headers        'Access-Control-Allow-Credentials: true';\n    more_set_headers        'Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS';\n    more_set_headers        'Access-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,access_token,__setXHR_';\n    if ($request_method = 'OPTIONS') {\n        more_set_headers    'Access-Control-Allow-Origin: $http_origin';\n        more_set_headers    'Access-Control-Allow-Credentials: true';\n        more_set_headers    'Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS';\n        more_set_headers    'Access-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,access_token,__setXHR_';\n        add_header          'Access-Control-Max-Age' 1728000;\n        add_header          'Content-Type' 'text/plain charset=UTF-8';\n        add_header          'Content-Length' 0;\n        return              204;\n    }\n}\n</code></pre>\n\n<p>Since my upgrade to nginx v1.10.x, \"more_set_headers\" isn't working anymore, and I've changed it by add_header 'blablabla' always;</p>\n\n<p>It now looks like this : </p>\n\n<pre><code>location / {\n    alias                   /some/path/;\n    proxy_set_header        X-Real-IP $remote_addr;\n    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header        X-Forwarded-Proto $scheme;\n    proxy_set_header        uuid $uuid;\n    add_header              'Access-Control-Allow-Origin: $http_origin' always;\n    add_header              'Access-Control-Allow-Credentials: true' always;\n    add_header              'Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS' always;\n    add_header              'Access-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,access_token,__setXHR_' always;\n    if ($request_method = 'OPTIONS') {\n        add_header          'Access-Control-Allow-Origin: $http_origin' always;\n        add_header          'Access-Control-Allow-Credentials: true' always;\n        add_header          'Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS' always;\n        add_header          'Access-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,access_token,__setXHR_' always;\n        add_header          'Access-Control-Max-Age' 1728000;\n        add_header          'Content-Type' 'text/plain charset=UTF-8';\n        add_header          'Content-Length' 0;\n        return              204;\n    }\n}\n</code></pre>\n\n<p>However, when I now go on the website, I have this error : </p>\n\n<blockquote>\n  <p>Failed to load <a href=\"https://mywebsite/auth/login\" rel=\"nofollow noreferrer\">https://mywebsite/auth/login</a>: Response to preflight request doesn't pass access control check: The 'Access-Control-Allow-Origin' header contains multiple values '$http_origin: always', but only one is allowed. Origin '<a href=\"https://mywebsite\" rel=\"nofollow noreferrer\">https://mywebsite</a>' is therefore not allowed access.</p>\n</blockquote>\n\n<p>What should I change to make it work ? I'm a bit stuck there.</p>\n"},{"tags":["javascript","html","jquery","css"],"owner":{"reputation":403,"user_id":4416562,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/130a4758a9ca6d54e51f903474aa50e3?s=128&d=identicon&r=PG&f=1","display_name":"hayley","link":"https://stackoverflow.com/users/4416562/hayley"},"is_answered":true,"view_count":105,"accepted_answer_id":63334856,"answer_count":2,"score":3,"last_activity_date":1597049212,"creation_date":1597038724,"last_edit_date":1597049212,"question_id":63334800,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63334800/dynamically-removeclass-from-the-element-but-click-event-still-can-be-detected","title":"Dynamically removeClass from the element but Click event still can be detected","body":"<p>I have buttons look like this:</p>\n<pre><code>&lt;a class=&quot;h-modal-btn branch-modal-btn&quot;&gt; Buy Now &lt;/a&gt;\n</code></pre>\n<p>The scenario is that I want to remove class and add attributes to the buttons according to the query string passed by the URL. Omit the above steps, I just do</p>\n<pre><code>$('a.branch-modal-btn').removeClass('h-modal-btn');\n</code></pre>\n<p>When I check whether the class is removed by checking the developer tools. Well, the class is removed from the HTML. Great! But immediately I found that the code below is still executed.</p>\n<pre><code>$('.h-modal-btn').on('click', function() {\n    // Do somthing\n)}\n</code></pre>\n<p>That's so depressing! Please help me, I'll be appreciated.</p>\n"},{"tags":["html","css"],"owner":{"reputation":532,"user_id":12756155,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/16b043a54fe413951bbee25797ca7c62?s=128&d=identicon&r=PG&f=1","display_name":"Newbie123","link":"https://stackoverflow.com/users/12756155/newbie123"},"is_answered":true,"view_count":145,"accepted_answer_id":61432658,"answer_count":2,"score":6,"last_activity_date":1587942434,"creation_date":1587848766,"last_edit_date":1587942434,"question_id":61432609,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/61432609/how-to-set-the-maximum-size-for-a-h1-element","title":"How to set the maximum size for a &lt;h1&gt; element?","body":"<p>I have a <code>&lt;h1 style=\"font-size:2.5vw;\"&gt;Example&lt;/h1&gt;</code> in my HTML file. I've been testing how it looks in different viewport sizes using 'Chrome DevTools' (Google Chrome's developer tools).</p>\n\n<p>I found that the header is too large compared to the rest of the content in my HTML when the device is set to 'iPad Pro' (1024x1366).</p>\n\n<p>In order to resolve this issue, I was wondering if there was a way to set a maximum size for the header element whilst incorporating <code>\"font-size:2.5vw;\"</code> (I need it to still be responsive with respect to the size of the viewport)?</p>\n\n<p>I tried adding <code>max-width://size</code> into the <code>style</code> field of the  element, but this did not make a difference.</p>\n\n<p><strong>NOTE:</strong> My <code>meta</code> element looks like this: <code>&lt;meta name=\"viewport\" content=\"initial-scale=0.41, maximum-scale=1.0\" /&gt;</code></p>\n"},{"tags":["docker","gitlab","gitlab-ci"],"owner":{"reputation":1929,"user_id":7756971,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cdfeb91faf8bd3097e6f2a65de234b5f?s=128&d=identicon&r=PG&f=1","display_name":"gamechanger17","link":"https://stackoverflow.com/users/7756971/gamechanger17"},"is_answered":true,"view_count":12677,"answer_count":2,"score":7,"last_activity_date":1567290289,"creation_date":1538830021,"last_edit_date":1567290289,"question_id":52679245,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52679245/how-to-copy-a-file-from-the-repository-into-the-docker-container-used-for-a-job","title":"How to copy a file from the repository, into the Docker container used for a job, in gitlab-ci.yml","body":"<p>How can I add a file from my project into a Docker using in a <code>gitlab-ci</code> job. Suppose I have below job in my <code>.gitlab-ci.yml</code> .</p>\n\n<pre><code>build:master:\n  image: ubuntu:latest\n  script:\n    - cp sample.txt /sample.txt\n  stage: build\n  only:\n    - master\n</code></pre>\n\n<p>How to copy a sample.txt inside Ubuntu image? I was thinking as it is already a running container so we can't perform copy command directly but have to run</p>\n\n<pre><code>docker cp sample.txt mycontainerID:/sample.txt\n</code></pre>\n\n<p>but again how will I get mycontainerID? because it will be running inside a Gitlab runner and any random id will be assigned for every run. Is my assumption is wrong?</p>\n"}],"has_more":false,"quota_max":300,"quota_remaining":298}